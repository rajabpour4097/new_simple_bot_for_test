# ุจูููโุณุงุฒ ุฎุฑูุฌ (Exit Optimizer) - ุฑุงูููุง ูุงุฑุณ

## ๐ฏ ูุฏู
ุงู ุงุจุฒุงุฑูุง ุจุฑุง **ุจูููโุณุงุฒ ุฒูุงู ู ุฑูุด ุจุณุชู ูพูุฒุดูโูุง** ูุณุชูุฏุ ูู ุจุงุฒ ฺฉุฑุฏู ุขูโูุง.

## ๐ ูุงูโูุง

### 1. `exit_optimizer_core.py`
**ููุชูุฑ ุงุตู ุดุจูโุณุงุฒ:**
- ุฎูุงูุฏู ReportHistory.csv (ุชุงุฑุฎฺู ูุนุงููุงุช)
- ุฎูุงูุฏู ุชฺฉโูุง ููุช ุงุฒ ูุงูโูุง CSV
- ุดุจูโุณุงุฒ ุฎุฑูุฌ ุจุง ุงุณุชุฑุงุชฺโูุง ูุฎุชูู:
  - **Trailing Stop** (ุชุนูุจ ุณูุฏ)
  - **Break-Even** (ุจุงุฒฺฏุดุช ุจู ุณุฑ ุจู ุณุฑ)
  - **Scale-Out** โ (ุจุณุชู ุจุฎุด ุงุฒ ูพูุฒุดู) - **ูุนุงู: 50% ุฏุฑ 1R**
  - **TP ูุณุชูู** (Take Profit ุซุงุจุช)

### 2. `grid_exit_optimization.py`
**ุฌุณุชุฌู ุฌุงูุน (Grid Search):**
- ุชุณุช ุชูุงู ุชุฑฺฉุจุงุช ููฺฉู ุงุฒ ูพุงุฑุงูุชุฑูุง
- ูุญุงุณุจู ูุนุงุฑูุง: Average Rุ Profit Factorุ Win Rateุ Max Drawdown
- ุชููุฏ 5 ูุงู ุฎุฑูุฌ:
  - `exit_grid_results.csv` - ุชูุงู ูุชุงุฌ
  - `exit_grid_top20.csv` - 20 ุชุง ุจุฑุชุฑ
  - `best_config.txt` - ุจูุชุฑู ุชูุธูุงุช + ูุนุงุฑูุง
  - `equity_curve_best.png` - ูููุฏุงุฑ ุณูุฏ ุชุฌูุน
  - `r_distribution_best.png` - ุชูุฒุน R

### 3. `optimize_exit_ticks.py`
**ุชุณุช ฺฉ ุชูุธู ุฎุงุต:**
- ุจุฑุง ุชุณุช ุณุฑุน ฺฉ ุงุณุชุฑุงุชฺ ุฎุงุต
- ููุงุด ูุนุงุฑูุง ู ูููุฏุงุฑูุง

## ๐ ูุญูู ุงุณุชูุงุฏู

### ูุฑุญูู 1: ุขูุงุฏูโุณุงุฒ ุฏุงุฏูโูุง
```powershell
# ูุทูุฆู ุดูุฏ ุงู ูุงูโูุง ูุฌูุฏ ุฏุงุฑูุฏ:
# 1. ReportHistory.csv ุฏุฑ ุฑุดู ูพุฑูฺู
# 2. ูพูุดู ticks/ ุจุง ูุงูโูุง Ticks_SYMBOL_YYYY_MM.csv
```

### ูุฑุญูู 2: ุงุฌุฑุง ุจูููโุณุงุฒ
```powershell
python grid_exit_optimization.py
```

ุงู ูุฑุขูุฏ ููฺฉู ุงุณุช ฺูุฏ ุฏููู ุชุง ฺูุฏ ุณุงุนุช ุทูู ุจฺฉุดุฏ (ุจุณุชู ุจู ุชุนุฏุงุฏ ูุนุงููุงุช ู ุชฺฉโูุง).

### ูุฑุญูู 3: ุจุฑุฑุณ ูุชุงุฌ
```powershell
# ูุงู ุจูุชุฑู ุชูุธูุงุช ุฑุง ุจุงุฒ ฺฉูุฏ
notepad best_config.txt

# ุง ุฏุฑ Excel ุจุงุฒ ฺฉูุฏ
exit_grid_top20.csv
```

### ูุฑุญูู 4: ุงุนูุงู ุจู ุฑุจุงุช
ูพุณ ุงุฒ ุงูุชู ุจูุชุฑู ุชูุธูุงุชุ ุขูโูุง ุฑุง ุฏุฑ `metatrader5_config.py` ุงุนูุงู ฺฉูุฏ.

## ๐ ูุนุงุฑูุง ุงุฑุฒุงุจ

- **average_R**: ูุงูฺฏู R ุจู ุฏุณุช ุขูุฏู (ูุฏู: >0)
- **profit_factor**: ูุณุจุช ุณูุฏูุง ุจู ุถุฑุฑูุง (ูุฏู: >1.5)
- **win_rate**: ุฏุฑุตุฏ ูุนุงููุงุช ุณูุฏุฏู (ูุฏู: >50%)
- **max_drawdown_R**: ุจุดุชุฑู ุงูุช ุชุฌูุน (ูุฏู: ูพุงู)
- **Monte Carlo DD**: ุชูุฒุน ุงุญุชูุงู Drawdown ุฏุฑ ุณูุงุฑููุง ุชุตุงุฏู

## โ๏ธ ูพุงุฑุงูุชุฑูุง ูุงุจู ุชูุธู

| ูพุงุฑุงูุชุฑ | ุชูุถุญ | ูุซุงู |
|---------|-------|------|
| `trailing_start_r` | ุดุฑูุน Trailing Stop ุฏุฑ ฺูุฏ R | 1.5 |
| `trailing_gap_r` | ูุงุตูู Trailing ุงุฒ ููุช (R) | 0.7 |
| `be_trigger_r` | ูุนุงู ุดุฏู Break-Even ุฏุฑ R | 0.5 |
| `be_back_r` | ูุงุตูู BE ุงุฒ Entry (R) | 0.1 |
| `tp_r` | Take Profit ุซุงุจุช (R) | 2.0 |
| `scaleout_r` | ุจุณุชู ุจุฎุด ุฏุฑ R โ **ูุนุงู** | 1.0 |
| `scaleout_frac` | ุฏุฑุตุฏ ุจุณุชู (0-1) โ **ูุนุงู** | 0.5 |

## ๐ ุชูุงูุช ุจุง ุณุณุชู ูุนู

### ุณุณุชู ูุนู (DYNAMIC_RISK_CONFIG):
- ูุฑุงุญู ุซุงุจุช: 2R โ 3R โ 4R โ ...
- ููุท SL/TP ุฑุง ุฌุงุจูโุฌุง ูโฺฉูุฏ
- Trailing Stop ูุฏุงุฑุฏ

### ุณุณุชู ุจูููโุณุงุฒ:
- Trailing Stop ูพูุง (ุชุนูุจ ุฎูุฏฺฉุงุฑ)
- Break-Even ููุดููุฏ
- Scale-Out โ **ูุนุงู** (ุจุณุชู 50% ุฏุฑ 1R)
- ุชุณุช ุดุฏู ุฑู ุฏุงุฏูโูุง ูุงูุน

## ๐ก ุชูุตูโูุง ุงุณุชูุงุฏู

1. **ุงูู ุงุฌุฑุง ฺฉูุฏ** ุจุง ุฏุงุฏูโูุง ุชุงุฑุฎ
2. **ุจุฑุฑุณ ฺฉูุฏ** ฺฉู ุขุง Average R ูุซุจุช ุงุณุชุ
3. **ุชุทุจู ุฏูุฏ** ุจุง ุณุจฺฉ ูุนุงููุงุช ุฎูุฏ
4. **ุชุณุช ฺฉูุฏ** ุฑู ุญุณุงุจ ุฏูู ูุจู ุงุฒ ูุงู

## ๐ฏ ูฺฺฏ ุฌุฏุฏ: Scale-Out ูุนุงู ุดุฏู

**ฺุณุชุ**
- ููุช ูุนุงููู ุจู 1R ุณูุฏ ูโุฑุณุฏุ **ุฎูุฏฺฉุงุฑ 50% ุงุฒ ูพูุฒุดู ุจุณุชู ูโุดูุฏ**
- 50% ุจุงููุงูุฏู ุจุง Trailing Stop ุงุฏุงูู ูโุงุจุฏ

**ูุฒุงุง:**
- โ ููู ฺฉุฑุฏู ุจุฎุด ุงุฒ ุณูุฏ ุฏุฑ ุงูุงู ูุนุงููู
- โ ฺฉุงูุด ุฑุณฺฉ ู ุงุณุชุฑุณ ุฑูุงู
- โ ุงูฺฉุงู ุงุฏุงูู ุณูุฏ ุฏุฑ 50% ุจุงููุงูุฏู
- โ ุจูุจูุฏ ูุณุจุช ุฑุณฺฉ ุจู ุฑูุงุฑุฏ ฺฉู

**ุชูุธูุงุช ูุนู:**
```json
{
  "scaleout_r": 1.0,        // ุจุณุชู ุฏุฑ 1R
  "scaleout_frac": 0.5      // ุจุณุชู 50%
}
```

## โ๏ธ ูฺฉุงุช ููู

- ุงู ุงุจุฒุงุฑูุง **ููุท ุจุฑุง ุจูููโุณุงุฒ ุฎุฑูุฌ** ูุณุชูุฏ
- **ููโุชูุงููุฏ** ฺฉูุช ุณฺฏูุงูโูุง ูุฑูุฏ ุฑุง ุจูุจูุฏ ุฏููุฏ
- ูุชุงุฌ ุจุฑ ุงุณุงุณ ฺฏุฐุดุชู ูุณุชูุฏ - ุชุถูู ุจุฑุง ุขูุฏู ูุณุช
- ููุดู ุจุง ูุฏุฑุช ุฑุณฺฉ ููุงุณุจ ุงุณุชูุงุฏู ฺฉูุฏ

